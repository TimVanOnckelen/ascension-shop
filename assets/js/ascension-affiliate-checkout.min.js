(function(f){let clientsForm="#ascension-clients-form";let formCache=null;function d(j,k,m,l,i){a();f.ajax({url:ascension.root+j,method:m,data:JSON.stringify(k),crossDomain:true,contentType:"application/json",xhrFields:{withCredentials:true},beforeSend:function(n){n.setRequestHeader("X-WP-Nonce",ascension.nonce)},success:function(n){b();l(n)},error:function(n){i(n)}})}function g(j,i){d("ascension/v1/add/order/customer",{data:{customer:j,who_pays:i}},"POST",function(m){f("form.checkout").find("input, textarea").val("");f("#ascension-who-pays-container").show();f(document.body).trigger("update_checkout");if(m.status==true){var k=f.param(m.customer,true);var l=decodeURIComponent(k);f("form.checkout").unserializeForm(l)}else{f(".woocommerce-checkout").unserializeForm(formCache);f(document.body).trigger("update_checkout")}},function(k){f(document.body).trigger("update_checkout");alert("Something got wrong, try again")})}function e(){a();let customer_id=f("#ascension-clients").val();let whoPays=f("[name='ascension-who-pays']:checked").val();if(customer_id<0){g(0,0);f(document.body).trigger("update_checkout");return}if(formCache==null){formCache=f("form.checkout").serialize()}g(customer_id,whoPays)}function h(){f("#ascension-clients").on("change",function(){e()});f('[name="ascension-who-pays"]').on("change",function(){e()})}function c(){f('[name="ascension-order-for"]').on("change",function(){let isChecked=f("[name='ascension-order-for']:checked").val();if(isChecked==="client"){f(clientsForm).show()}else{f(clientsForm).hide();f("#ascension-clients").val(1);f("#ascension-who-pays-container").hide();g(0,0);if(formCache){f(".woocommerce-checkout").unserializeForm(formCache)}}})}function a(){f(".woocommerce").prepend('<div class="ascension-loader"></div>')}function b(){f(".ascension-loader").remove()}f(document).on("ready",function(){f("#ascension-clients").select2({width:"100%"});g(0,0);c();h()})})(jQuery);