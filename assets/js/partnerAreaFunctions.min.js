(function(a){a(document).on("ready",function(){a("#searchByPartner").select2({width:"100%",allowClear:true});a(".searchByPartner").select2({width:"100%",allowClear:true});a("#searchOrderByClient").select2({ajax:{url:getClients.url,type:"GET",beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",getClients.nonce)},processResults:function(b){console.log(b);return{results:b.data}}}});a("body").on("click",".edit-user",function(b){b.preventDefault();let id=a(this).attr("data-id");a("#edit-user-"+id).show();a("#info-user-"+id).hide()});a(".downloadOverview").on("click",function(){a("#affwp-table").removeClass("affwp-table-responsive");a(".printArea").printThis({importCSS:true,importStyle:true,debug:true})});let OrdersTable=a(OrderArea.tableId).DataTable({processing:true,serverSide:true,ordering:false,ajax:{url:OrderArea.url,type:"GET",beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",OrderArea.nonce)},complete:function(){a("[name='_wp_http_referer']").val(OrderArea.referer)}},columns:[{data:"id"},{data:"date"},{data:"status"},{data:"amount"},{data:"client"},{data:"actions"}]});OrdersTable.columns().every(function(b){var c=this;if(b===0){a("#order-id-search").on("keyup change",function(){theId=a(this).val();if(c.search()!==this.value){c.search(theId).draw()}})}if(b===1){a("#orders-to,#orders-from").on("change",function(){var f=a("#orders-from").val();var e=a("#orders-to").val();if(f!==""&&e!==""){var d=f+"..."+e;if(c.search()!==this.value){c.search(d).draw()}}})}if(b===4){a("#searchOrderByClient").on("change",function(){if(c.search()!==this.value){c.search(this.value).draw()}})}});let theTable=a(partnerArea.tableId).DataTable({processing:true,serverSide:true,ordering:false,ajax:{url:partnerArea.url,type:"GET",beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",partnerArea.nonce)},complete:function(){a("[name='_wp_http_referer']").val(partnerArea.referer)}},columns:[{data:"id"},{data:"name"},{data:"info"},{data:"partner"},{data:"id",render:function(b){return'<a href="#" class="edit-user" data-id="'+b+'">'+partnerArea.editText+"</a>"}},{data:"discount"}]});theTable.columns().every(function(){var b=this;a("select#searchByPartner").on("change",function(){if(b.search()!==this.value){b.search(this.value).draw()}})});a("body").on("submit",".editUser",function(d){d.preventDefault();var c=a(this);var b=c.attr("action");let id=a(this).attr("data-id");a(this).hide();a("#info-user-"+id).before("<div id='userEditLoading'><b>"+partnerArea.savingText+"</b></div>");a.ajax({type:"POST",url:b,data:c.serialize(),success:function(e){a("#userEditLoading").remove();Swal.fire({title:partnerArea.successTextTitle,text:partnerArea.successText,type:"success",confirmButtonText:"Ok"});if(a(partnerArea.tableId).length){var f=theTable.page.info();theTable.ajax.reload(function(){theTable.page(f.page+1)})}else{location.reload()}}})});a("body").on("submit",".editPartner",function(d){d.preventDefault();var c=a(this);var b=c.attr("action");let id=a(this).attr("data-id");a(this).hide();a("#info-user-"+id).before("<div id='userEditLoading'><b>"+partnerArea.savingText+"</b></div>");a.ajax({type:"POST",url:b,data:c.serialize(),success:function(e){a("#userEditLoading").remove();Swal.fire({title:partnerArea.successTextTitle,text:partnerArea.successTextPartner,type:"success",confirmButtonText:"Ok"});location.reload()}})});a("body").on("submit",".editDiscount",function(f){f.preventDefault();var d=a(this);var b=d.attr("action");var c=d.children(".customer_rate").val();a(this).hide().before("<div id='userEditLoading'><b>"+partnerArea.savingText+"</b></div>");a.ajax({type:"POST",url:b,data:d.serialize(),success:function(e){a("#userEditLoading").remove();Swal.fire({title:partnerArea.successTextTitle,text:partnerArea.succesTextDiscount,type:"success",confirmButtonText:"Ok"});d.show();d.children(".customer_rate").val(c)}})})})})(jQuery);