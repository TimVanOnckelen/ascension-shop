(function(j){function h(b,a){if(!a){return}b.append(a.jquery?a.clone():a)}function g(a,d,b){var c=d.clone(b.formValues);if(b.formValues){i(d,c,"select, textarea")}if(b.removeScripts){c.find("script").remove()}if(b.printContainer){c.appendTo(a)}else{c.each(function(){j(this).children().appendTo(a)})}}function i(d,a,c){var b=d.find(c);a.find(c).each(function(l,e){j(e).val(b.eq(l).val())})}var f;j.fn.printThis=function(m){f=j.extend({},j.fn.printThis.defaults,m);var e=this instanceof jQuery?this:j(this);var a="printThis-"+(new Date()).getTime();if(window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)){var d='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script></head><body></body>")';var b=document.createElement("iframe");b.name="printIframe";b.id=a;b.className="MSIE";document.body.appendChild(b);b.src=d}else{var c=j("<iframe id='"+a+"' name='printIframe' />");c.appendTo("body")}var n=j("#"+a);if(!f.debug){n.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"})}if(typeof f.beforePrint==="function"){f.beforePrint()}setTimeout(function(){function y(r,q){var p,o;p=r.get(0);p=p.contentWindow||p.contentDocument||p;o=p.document||p.contentDocument||p;o.open();o.write(q);o.close()}if(f.doctypeString){y(n,f.doctypeString)}var z=n.contents(),x=z.find("head"),k=z.find("body"),F=j("base"),D;if(f.base===true&&F.length>0){D=F.attr("href")}else{if(typeof f.base==="string"){D=f.base}else{D=document.location.protocol+"//"+document.location.host}}x.append('<base href="'+D+'">');if(f.importCSS){j("link[rel=stylesheet]").each(function(){var o=j(this).attr("href");if(o){var p=j(this).attr("media")||"all";x.append("<link type='text/css' rel='stylesheet' href='"+o+"' media='"+p+"'>")}})}if(f.importStyle){j("style").each(function(){x.append(this.outerHTML)})}if(f.pageTitle){x.append("<title>"+f.pageTitle+"</title>")}if(f.loadCSS){if(j.isArray(f.loadCSS)){jQuery.each(f.loadCSS,function(o,p){x.append("<link type='text/css' rel='stylesheet' href='"+this+"'>")})}else{x.append("<link type='text/css' rel='stylesheet' href='"+f.loadCSS+"'>")}}var B=j("html")[0];z.find("html").prop("style",B.style.cssText);var E=f.copyTagClasses;if(E){E=E===true?"bh":E;if(E.indexOf("b")!==-1){k.addClass(j("body")[0].className)}if(E.indexOf("h")!==-1){z.find("html").addClass(B.className)}}h(k,f.header);if(f.canvas){var C=0;e.find("canvas").addBack("canvas").each(function(){j(this).attr("data-printthis",C++)})}g(k,e,f);if(f.canvas){k.find("canvas").each(function(){var p=j(this).data("printthis"),o=j('[data-printthis="'+p+'"]');this.getContext("2d").drawImage(o[0],0,0);if(j.isFunction(j.fn.removeAttr)){o.removeAttr("data-printthis")}else{j.each(o,function(r,q){q.removeAttribute("data-printthis")})}})}if(f.removeInline){var l=f.removeInlineSelector||"*";if(j.isFunction(j.removeAttr)){k.find(l).removeAttr("style")}else{k.find(l).attr("style","")}}h(k,f.footer);function A(o,q){var p=o.get(0);p=p.contentWindow||p.contentDocument||p;if(typeof q==="function"){if("matchMedia" in p){p.matchMedia("print").addListener(function(r){if(r.matches){q()}})}else{p.onbeforeprint=q}}}A(n,f.beforePrintEvent);setTimeout(function(){if(n.hasClass("MSIE")){window.frames.printIframe.focus();x.append("<script>  window.print(); <\/script>")}else{if(document.queryCommandSupported("print")){n[0].contentWindow.document.execCommand("print",false,null)}else{n[0].contentWindow.focus();n[0].contentWindow.print()}}if(!f.debug){setTimeout(function(){n.remove()},1000)}if(typeof f.afterPrint==="function"){f.afterPrint()}},f.printDelay)},333)};j.fn.printThis.defaults={debug:false,importCSS:true,importStyle:false,printContainer:true,loadCSS:"",pageTitle:"",removeInline:false,removeInlineSelector:"*",printDelay:333,header:null,footer:null,base:false,formValues:true,canvas:false,doctypeString:"<!DOCTYPE html>",removeScripts:false,copyTagClasses:false,beforePrintEvent:null,beforePrint:null,afterPrint:null}})(jQuery);