(function(c){function e(f,g){if(!g){return}f.append(g.jquery?g.clone():g)}function a(i,f,h){var g=f.clone(h.formValues);if(h.formValues){d(f,g,"select, textarea")}if(h.removeScripts){g.find("script").remove()}if(h.printContainer){g.appendTo(i)}else{g.each(function(){c(this).children().appendTo(i)})}}function d(f,i,g){var h=f.find(g);i.find(g).each(function(j,k){c(k).val(h.eq(j).val())})}var b;c.fn.printThis=function(g){b=c.extend({},c.fn.printThis.defaults,g);var h=this instanceof jQuery?this:c(this);var l="printThis-"+(new Date()).getTime();if(window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)){var i='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script></head><body></body>")';var k=document.createElement("iframe");k.name="printIframe";k.id=l;k.className="MSIE";document.body.appendChild(k);k.src=i}else{var j=c("<iframe id='"+l+"' name='printIframe' />");j.appendTo("body")}var f=c("#"+l);if(!b.debug){f.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"})}if(typeof b.beforePrint==="function"){b.beforePrint()}setTimeout(function(){function o(y,z){var x,A;x=y.get(0);x=x.contentWindow||x.contentDocument||x;A=x.document||x.contentDocument||x;A.open();A.write(z);A.close()}if(b.doctypeString){o(f,b.doctypeString)}var n=f.contents(),p=n.find("head"),r=n.find("body"),s=c("base"),u;if(b.base===true&&s.length>0){u=s.attr("href")}else{if(typeof b.base==="string"){u=b.base}else{u=document.location.protocol+"//"+document.location.host}}p.append('<base href="'+u+'">');if(b.importCSS){c("link[rel=stylesheet]").each(function(){var x=c(this).attr("href");if(x){var y=c(this).attr("media")||"all";p.append("<link type='text/css' rel='stylesheet' href='"+x+"' media='"+y+"'>")}})}if(b.importStyle){c("style").each(function(){p.append(this.outerHTML)})}if(b.pageTitle){p.append("<title>"+b.pageTitle+"</title>")}if(b.loadCSS){if(c.isArray(b.loadCSS)){jQuery.each(b.loadCSS,function(x,y){p.append("<link type='text/css' rel='stylesheet' href='"+this+"'>")})}else{p.append("<link type='text/css' rel='stylesheet' href='"+b.loadCSS+"'>")}}var w=c("html")[0];n.find("html").prop("style",w.style.cssText);var t=b.copyTagClasses;if(t){t=t===true?"bh":t;if(t.indexOf("b")!==-1){r.addClass(c("body")[0].className)}if(t.indexOf("h")!==-1){n.find("html").addClass(w.className)}}e(r,b.header);if(b.canvas){var v=0;h.find("canvas").addBack("canvas").each(function(){c(this).attr("data-printthis",v++)})}a(r,h,b);if(b.canvas){r.find("canvas").each(function(){var y=c(this).data("printthis"),x=c('[data-printthis="'+y+'"]');this.getContext("2d").drawImage(x[0],0,0);if(c.isFunction(c.fn.removeAttr)){x.removeAttr("data-printthis")}else{c.each(x,function(z,A){A.removeAttribute("data-printthis")})}})}if(b.removeInline){var q=b.removeInlineSelector||"*";if(c.isFunction(c.removeAttr)){r.find(q).removeAttr("style")}else{r.find(q).attr("style","")}}e(r,b.footer);function m(x,y){var z=x.get(0);z=z.contentWindow||z.contentDocument||z;if(typeof y==="function"){if("matchMedia" in z){z.matchMedia("print").addListener(function(A){if(A.matches){y()}})}else{z.onbeforeprint=y}}}m(f,b.beforePrintEvent);setTimeout(function(){if(f.hasClass("MSIE")){window.frames.printIframe.focus();p.append("<script>  window.print(); <\/script>")}else{if(document.queryCommandSupported("print")){f[0].contentWindow.document.execCommand("print",false,null)}else{f[0].contentWindow.focus();f[0].contentWindow.print()}}if(!b.debug){setTimeout(function(){f.remove()},1000)}if(typeof b.afterPrint==="function"){b.afterPrint()}},b.printDelay)},333)};c.fn.printThis.defaults={debug:false,importCSS:true,importStyle:false,printContainer:true,loadCSS:"",pageTitle:"",removeInline:false,removeInlineSelector:"*",printDelay:333,header:null,footer:null,base:false,formValues:true,canvas:false,doctypeString:"<!DOCTYPE html>",removeScripts:false,copyTagClasses:false,beforePrintEvent:null,beforePrint:null,afterPrint:null}})(jQuery);