(function(e){function b(f,g){if(!g){return}f.append(g.jquery?g.clone():g)}function c(g,h,f){var i=h.clone(f.formValues);if(f.formValues){a(h,i,"select, textarea")}if(f.removeScripts){i.find("script").remove()}if(f.printContainer){i.appendTo(g)}else{i.each(function(){e(this).children().appendTo(g)})}}function a(h,g,i){var f=h.find(i);g.find(i).each(function(j,k){e(k).val(f.eq(j).val())})}var d;e.fn.printThis=function(g){d=e.extend({},e.fn.printThis.defaults,g);var l=this instanceof jQuery?this:e(this);var j="printThis-"+(new Date()).getTime();if(window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)){var h='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script></head><body></body>")';var f=document.createElement("iframe");f.name="printIframe";f.id=j;f.className="MSIE";document.body.appendChild(f);f.src=h}else{var i=e("<iframe id='"+j+"' name='printIframe' />");i.appendTo("body")}var k=e("#"+j);if(!d.debug){k.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"})}if(typeof d.beforePrint==="function"){d.beforePrint()}setTimeout(function(){function w(z,A){var y,x;y=z.get(0);y=y.contentWindow||y.contentDocument||y;x=y.document||y.contentDocument||y;x.open();x.write(A);x.close()}if(d.doctypeString){w(k,d.doctypeString)}var v=k.contents(),m=v.find("head"),r=v.find("body"),n=e("base"),p;if(d.base===true&&n.length>0){p=n.attr("href")}else{if(typeof d.base==="string"){p=d.base}else{p=document.location.protocol+"//"+document.location.host}}m.append('<base href="'+p+'">');if(d.importCSS){e("link[rel=stylesheet]").each(function(){var y=e(this).attr("href");if(y){var x=e(this).attr("media")||"all";m.append("<link type='text/css' rel='stylesheet' href='"+y+"' media='"+x+"'>")}})}if(d.importStyle){e("style").each(function(){m.append(this.outerHTML)})}if(d.pageTitle){m.append("<title>"+d.pageTitle+"</title>")}if(d.loadCSS){if(e.isArray(d.loadCSS)){jQuery.each(d.loadCSS,function(y,x){m.append("<link type='text/css' rel='stylesheet' href='"+this+"'>")})}else{m.append("<link type='text/css' rel='stylesheet' href='"+d.loadCSS+"'>")}}var t=e("html")[0];v.find("html").prop("style",t.style.cssText);var o=d.copyTagClasses;if(o){o=o===true?"bh":o;if(o.indexOf("b")!==-1){r.addClass(e("body")[0].className)}if(o.indexOf("h")!==-1){v.find("html").addClass(t.className)}}b(r,d.header);if(d.canvas){var s=0;l.find("canvas").addBack("canvas").each(function(){e(this).attr("data-printthis",s++)})}c(r,l,d);if(d.canvas){r.find("canvas").each(function(){var x=e(this).data("printthis"),y=e('[data-printthis="'+x+'"]');this.getContext("2d").drawImage(y[0],0,0);if(e.isFunction(e.fn.removeAttr)){y.removeAttr("data-printthis")}else{e.each(y,function(z,A){A.removeAttribute("data-printthis")})}})}if(d.removeInline){var q=d.removeInlineSelector||"*";if(e.isFunction(e.removeAttr)){r.find(q).removeAttr("style")}else{r.find(q).attr("style","")}}b(r,d.footer);function u(y,z){var x=y.get(0);x=x.contentWindow||x.contentDocument||x;if(typeof z==="function"){if("matchMedia" in x){x.matchMedia("print").addListener(function(A){if(A.matches){z()}})}else{x.onbeforeprint=z}}}u(k,d.beforePrintEvent);setTimeout(function(){if(k.hasClass("MSIE")){window.frames.printIframe.focus();m.append("<script>  window.print(); <\/script>")}else{if(document.queryCommandSupported("print")){k[0].contentWindow.document.execCommand("print",false,null)}else{k[0].contentWindow.focus();k[0].contentWindow.print()}}if(!d.debug){setTimeout(function(){k.remove()},1000)}if(typeof d.afterPrint==="function"){d.afterPrint()}},d.printDelay)},333)};e.fn.printThis.defaults={debug:false,importCSS:true,importStyle:false,printContainer:true,loadCSS:"",pageTitle:"",removeInline:false,removeInlineSelector:"*",printDelay:333,header:null,footer:null,base:false,formValues:true,canvas:false,doctypeString:"<!DOCTYPE html>",removeScripts:false,copyTagClasses:false,beforePrintEvent:null,beforePrint:null,afterPrint:null}})(jQuery);